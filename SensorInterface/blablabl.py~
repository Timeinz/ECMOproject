import asyncio
from bleak import BleakScanner

async def scan_ble_devices():
    scanner = BleakScanner()
    await scanner.start()
    await asyncio.sleep(5.0)
    await scanner.stop()
    print('bitch')
    for device in scanner.discovered_devices:
        
        print(f"{device.address}, {device.name or 'Unknown'}, {device.rssi}")



if __name__ == "__main__":
    asyncio.run(scan_ble_devices())

'''
if platform.system() == "Emscripten":
    asyncio.ensure_future(scan_ble_devices())
else:
    asyncio.run(scan_ble_devices())
'''